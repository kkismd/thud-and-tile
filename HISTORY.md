# Task History Log

## 2025-10-08 - Phase 2Då†è¨­è¨ˆæº–å‚™ã¨ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Œäº†

### âœ… WIPã‚³ãƒ¼ãƒ‰ã®å®‰å…¨é€€é¿ã¨å®‰å®šçŠ¶æ…‹ã¸ã®å¾©å…ƒ
- æ–°ãƒ–ãƒ©ãƒ³ãƒ `phase2d-wip` ã‚’ä½œæˆã—ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—è©¦ä½œã¨é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒŸãƒƒãƒˆ
- å®‰å®šãƒ©ã‚¤ãƒ³ `feature/wasm-integration-from-complete` ã‚’ã‚¿ã‚° `phase2c-completed` ã«ãƒãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆã—ã€Phase 2Cå®Œäº†æ™‚ç‚¹ã¸å¾©å…ƒ
- ä½œæ¥­ãƒ„ãƒªãƒ¼ã‚’ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã«ä¿ã¡ã€å†è¨­è¨ˆç€æ‰‹ã®æº–å‚™ã‚’æ•´å‚™

### âœ… CLIãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼å†è¨­è¨ˆãƒ—ãƒ©ãƒ³ã®ç¢ºå®š
- ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å…¥å‡ºåŠ›å¥‘ç´„ã€æƒ³å®šã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã€ã‚¨ãƒ©ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã‚’æ•´ç†
- FrameBuilder/ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ‰ãƒ©ã‚¤ãƒ/å·®åˆ†è¨ˆç®—ã®ä¸‰å±¤æ§‹é€ ã§å†æ§‹ç¯‰ã™ã‚‹æ–¹é‡ã‚’æ±ºå®š
- ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒ†ã‚¹ãƒˆå°å…¥ã¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨æ¤œè¨¼ãƒã‚¤ãƒŠãƒªè¿½åŠ ã‚’å“è³ªã‚²ãƒ¼ãƒˆã¨ã—ã¦è¨­å®š

### âœ… ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
- `PROJECT_STATUS.md` ã«Phase 2Cå®Œäº†ãŠã‚ˆã³Phase 2Då†è¨ˆç”»ã®çŠ¶æ³ã‚’åæ˜ 
- `IMPLEMENTATION_ROADMAP.md` ã‚’ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼å†è¨­è¨ˆä¸­å¿ƒã®ã‚¹ãƒ†ãƒƒãƒ—ã¸æ”¹è¨‚
- Phaseå±¥æ­´ã¨ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯åˆ¤æ–­ã‚’æœ¬å±¥æ­´ãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½è¨˜

### ğŸ”œ æ¬¡ã‚¹ãƒ†ãƒƒãƒ—
- FrameBuilderã®éª¨æ ¼å®Ÿè£…ãŠã‚ˆã³æœ€åˆã®æ±ºå®šè«–çš„æç”»ãƒ†ã‚¹ãƒˆã®è¿½åŠ 
- ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ‰ãƒ©ã‚¤ãƒã®APIè¨­è¨ˆã¨ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—å®Ÿè£…
- ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒ†ã‚¹ãƒˆåŸºç›¤å°å…¥å¾Œã€Phase 2Dæ­£å¼å®Œäº†ã«å‘ã‘ãŸçµ±åˆä½œæ¥­

## 2025-10-04 - ãƒ¡ã‚«ãƒ‹ã‚¯ã‚¹æ”¹å–„è¨ˆç”»ç­–å®šå®Œäº†

### âœ… ãƒ¡ã‚«ãƒ‹ã‚¯ã‚¹æ”¹å–„è¨ˆç”»ã®å®Œæˆ
- **ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ æ”¹ä¿®è¨ˆç”»:** ColorScores â†’ total_scoreçµ±ä¸€è¨­è¨ˆ
  - è‰²åˆ¥è¡¨ç¤ºå»ƒæ­¢ã€åˆè¨ˆå€¤ã®ã¿è¡¨ç¤º
  - ç›´æ¥åˆè¨ˆå€¤åŠ ç®—æ–¹å¼ã¸ã®å¤‰æ›´
  - CustomScoreSystemæ§‹é€ ä½“ã®å¤‰æ›´ä»•æ§˜ç¢ºå®š
- **CHAIN-BONUSã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ:** æ–°æ©Ÿèƒ½ã®è©³ç´°ä»•æ§˜ç­–å®š
  - ColorMaxChainsã«chain_bonusãƒ¡ãƒ³ãƒè¿½åŠ 
  - MAX-CHAINæ›´æ–°æ™‚ã®åŠ ç®—ãƒ­ã‚¸ãƒƒã‚¯æ˜ç¢ºåŒ–
  - Solidãƒ©ã‚¤ãƒ³ç›¸æ®ºã§ã®æ¶ˆè²»ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ
- **Solidãƒ©ã‚¤ãƒ³ç›¸æ®ºæ©Ÿèƒ½ï¼ˆEraseLineï¼‰:** ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»•æ§˜å®Œæˆ
  - LineBlink â†’ PushDown â†’ EraseLineã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹è¨­è¨ˆ
  - 120ãƒŸãƒªç§’é–“éš”ã§ã®å®Ÿè£…æ–¹é‡ç¢ºå®š
  - ã‚²ãƒ¼ãƒ ãƒãƒ©ãƒ³ã‚¹è€ƒå¯Ÿã¨ãƒ—ãƒ¬ã‚¤ãƒ«ãƒ¼ãƒ—åˆ†æ
- **å®Ÿè£…è¨ˆç”»ç­–å®š:** TDDã‚µã‚¤ã‚¯ãƒ«ã§ã®æ®µéšçš„å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—æ˜ç¢ºåŒ–
  - 5æ®µéšã®å®Ÿè£…é †åºç¢ºå®š
  - æ—¢å­˜ãƒ†ã‚¹ãƒˆä¿®æ­£ï¼ˆç´„15å€‹ï¼‰ã®å½±éŸ¿ç¯„å›²ç‰¹å®š
  - ROADMAPã¸ã®æœ€å„ªå…ˆäº‹é …åæ˜ 

### âœ… ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™
- **mechanics_improve_plan.md:** å®Ÿè£…ã«å‘ã‘ãŸå®Œå…¨ãªæŠ€è¡“ä»•æ§˜æ›¸å®Œæˆ
- **ROADMAP.md:** Priority 0ã¨ã—ã¦æœ€å„ªå…ˆäº‹é …è¨­å®š
- **game_spec.md:** Solid=ç°è‰²è¡¨è¨˜ã®çµ±ä¸€åŒ–

## 2024-10-04 - ã‚³ãƒ¼ãƒ‰å…±é€šåŒ–ãƒ»å“è³ªæ”¹å–„ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†

### âœ… Issue #4, #5 ãƒã‚°ä¿®æ­£å®Œäº†
- **Issue #4:** ZãƒŸãƒã®SHAPEå›è»¢æ™‚è‰²é…ç½®ãšã‚Œ â†’ **è§£æ±ºæ¸ˆã¿**
  - ç‰©ç†å›è»¢é †åºã«æº–æ‹ ã—ãŸåº§æ¨™é…åˆ—ä¿®æ­£
  - CLIãƒ»Webç‰ˆä¸¡æ–¹ã§çµ±ä¸€ã•ã‚ŒãŸæŒ™å‹•ã‚’å®Ÿç¾
- **Issue #5:** ãƒ©ã‚¤ãƒ³æ¶ˆå»å¾ŒConnectedæ•°æœªæ›´æ–° â†’ **è§£æ±ºæ¸ˆã¿**
  - `update_animation()`ã§ã®connectedæ•°ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
  - ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†æ™‚ã®ç¢ºå®Ÿãªå†è¨ˆç®—

### âœ… ã‚³ãƒ¼ãƒ‰å…±é€šåŒ–ã«ã‚ˆã‚‹é‡è¤‡å‰Šé™¤
- **SHAPESé…åˆ—çµ±ä¸€:** tetromino.rs â†’ lib.rså…±é€šåŒ– (50+è¡Œå‰Šé™¤)
  - `get_shape_coordinates()`å…¬é–‹é–¢æ•°ã§1ç®‡æ‰€ç®¡ç†
  - CLIãƒ»Webç‰ˆã§åŒã˜åº§æ¨™ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨ã€ä¿®æ­£ã¯1ç®‡æ‰€ã§å®Œçµ
- **TetrominoShapeå®šç¾©çµ±ä¸€:** Webç‰ˆé‡è¤‡å®šç¾©å‰Šé™¤ã€CLIç‰ˆã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆä½¿ç”¨
- **7-bag ã‚·ã‚¹ãƒ†ãƒ çµ±ä¸€:** WebTetrominoBagå‰Šé™¤ã€TetrominoBagå…±é€šä½¿ç”¨
- **éš£æ¥åˆ¶ç´„ãƒã‚§ãƒƒã‚¯å…±é€šåŒ–:** `validate_adjacency_constraints()`ã§ãƒ­ã‚¸ãƒƒã‚¯çµ±ä¸€

### âœ… APIæ•´ç†ãƒ»å“è³ªå‘ä¸Š
- **ç´›ã‚‰ã‚ã—ã„APIå‰Šé™¤:** `SimpleTetromino::new_random()`ï¼ˆå®Œå…¨ãƒ©ãƒ³ãƒ€ãƒ ï¼‰ã‚’å‰Šé™¤
- **Webç‰ˆãƒ†ã‚¹ãƒˆå¼·åŒ–:** 3æ–°è¦ãƒ†ã‚¹ãƒˆè¿½åŠ 
  - `test_web_7_bag_system()`: Webç‰ˆ7-bagã‚·ã‚¹ãƒ†ãƒ æ¤œè¨¼
  - `test_web_adjacency_constraints()`: éš£æ¥åˆ¶ç´„æ¤œè¨¼
  - `test_web_cli_tetromino_compatibility()`: CLIãƒ»Webç‰ˆäº’æ›æ€§ç¢ºèª
- **å“è³ªä¿è¨¼:** 95/95ãƒ†ã‚¹ãƒˆæˆåŠŸï¼ˆlib.rs: 30, main.rs: 65ï¼‰

### âœ… æŠ€è¡“çš„è² å‚µè§£æ¶ˆ
- **DRYåŸå‰‡é”æˆ:** é‡è¤‡ã‚³ãƒ¼ãƒ‰ã®å¤§å¹…å‰Šæ¸›
- **Single Source of Truth:** é‡è¦ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®ä¸€å…ƒç®¡ç†
- **ä¿å®ˆæ€§å‘ä¸Š:** å°†æ¥ã®ä¿®æ­£ãƒ»æ©Ÿèƒ½è¿½åŠ ã‚³ã‚¹ãƒˆã®å‰Šæ¸›
- **ãƒ†ã‚¹ãƒˆå¼·åŒ–:** Webç‰ˆå“è³ªä¿è¨¼ä½“åˆ¶ã®ç¢ºç«‹

**ä¸»è¦ã‚³ãƒŸãƒƒãƒˆ:**
- `dc8c243`: "refactor: å…±é€šåŒ–ã«ã‚ˆã‚ŠSHAPESé…åˆ—ã®é‡è¤‡ã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤"
  - 2 files changed, 17 insertions(+), 67 deletions(-)
  - CLIãƒ»Webç‰ˆçµ±ä¸€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®åŸºç›¤ç¢ºç«‹

---

## 2024-10-04 - çµ±ä¸€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç¬¬1å›å®Ÿè£…ãƒ¬ãƒˆãƒ­ã‚¹ãƒšã‚¯ãƒ†ã‚£ãƒ–

### âŒ çµ±ä¸€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç¬¬1å›å®Ÿè£… - å¤§å¹…ãªæ©Ÿèƒ½å›å¸°
- **ãƒ–ãƒ©ãƒ³ãƒ:** feature/unified-architecture
- **å®Ÿè£…æœŸé–“:** 2024-10-04
- **çµæœ:** å®Ÿè£…ä¸­æ–­ãƒ»æ©Ÿèƒ½å›å¸°ã«ã‚ˆã‚Šå»ƒæ£„æ±ºå®š
- **æ•™è¨“:** ãƒ¬ãƒˆãƒ­ã‚¹ãƒšã‚¯ãƒ†ã‚£ãƒ–åˆ†æå®Ÿæ–½ã€ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã®é‡è¦æ€§ã‚’ç¢ºèª

**å®Ÿè£…ã—ãŸè¦ç´ :**
- UnifiedGameEngine trait ã¨ GameStateAccess interface
- CLI/Webåˆ†é›¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- çµ±ä¸€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ  (draw_unified)
- ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ çŠ¶æ…‹ã‚¢ã‚¯ã‚»ã‚¹

**æ·±åˆ»ãªå•é¡Œ:**
- CLIç‰ˆ: è½ä¸‹ãƒ”ãƒ¼ã‚¹ãŒ1ãƒ–ãƒ­ãƒƒã‚¯ã®ã¿è¡¨ç¤ºã€ç”»é¢ãƒ•ãƒªãƒƒã‚«ãƒ¼
- ä¸¡ç‰ˆ: Push Down animations, Line BlinkåŠ¹æœ, Connected Cells, Ghost Pieceså®Œå…¨æ¶ˆå¤±
- Webç‰ˆ: 2000+è¡Œã®æ©Ÿèƒ½ãŒ214è¡Œã«æ¿€æ¸›ã€å·®åˆ†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å–ªå¤±
- ã‚¹ã‚³ã‚¢: è©³ç´°ãªã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ç°¡ç´ åŒ–

### âœ… ãƒ¬ãƒˆãƒ­ã‚¹ãƒšã‚¯ãƒ†ã‚£ãƒ–åˆ†æå®Œäº†
- **æ–‡æ›¸:** UNIFIED_ARCHITECTURE_RETROSPECTIVE.md
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯:** Keep/Problem/Try analysis
- **çµè«–:** ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã«ã‚ˆã‚‹æ®µéšçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒå¿…è¦

**Keep (ä¿æŒã™ã¹ãè¦ç´ ):**
- UnifiedGameEngine traitè¨­è¨ˆæ€æƒ³
- GameStateAccessæŠ½è±¡åŒ–æ¦‚å¿µ  
- CLI/Webåˆ†é›¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- çµ±ä¸€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ç›®æ¨™

**Problem (å•é¡Œç‚¹):**
- Big Bang ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã‚ˆã‚‹éåº¦ãªå¤‰æ›´
- æ—¢å­˜æ©Ÿèƒ½ã®è»½è¦–ã¨ä¿è­·ä¸è¶³
- ãƒ†ã‚¹ãƒˆä¸è¶³ã«ã‚ˆã‚‹å“è³ªä¿è¨¼æ¬ å¦‚
- éåº¦ãªæŠ½è±¡åŒ–ã«ã‚ˆã‚‹è¤‡é›‘æ€§å¢—åŠ 

**Try (æ¬¡å›æ”¹å–„ç­–):**
- Test-Driven Development (TDD) é©ç”¨
- Red-Green-Refactor ã‚µã‚¤ã‚¯ãƒ«å³å®ˆ
- æ®µéšçš„ç§»è¡Œã«ã‚ˆã‚‹æ©Ÿèƒ½ä¿æŒ
- æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®æ®µéšçš„ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

### âœ… å®Ÿè£…å±¥æ­´ã®è¨˜éŒ²ä¿å­˜
- **æœ€çµ‚ã‚³ãƒŸãƒƒãƒˆ:** 17dfb4d "çµ±ä¸€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å®Ÿè£…è©¦è¡Œã®ä½œæ¥­é€”ä¸­çŠ¶æ…‹ã‚’è¨˜éŒ²"
- **ãƒ¬ãƒˆãƒ­ã‚¹ãƒšã‚¯ãƒ†ã‚£ãƒ–:** fb833a2 "ãƒ¬ãƒˆãƒ­ã‚¹ãƒšã‚¯ãƒ†ã‚£ãƒ–ã«ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’è¿½åŠ "
- **mainãƒ–ãƒ©ãƒ³ãƒçµ±åˆ:** b358386 "ãƒ¬ãƒˆãƒ­ã‚¹ãƒšã‚¯ãƒ†ã‚£ãƒ–æ–‡æ›¸ã‚’mainãƒ–ãƒ©ãƒ³ãƒã«è¿½åŠ "

---

## 2024-10-03 - Phase 2A SRS Unification Complete

### âœ… SRS True Rotation Implementation for O-mino
- **Commit:** f99b3a4
- **Files:** src/tetromino.rs, src/lib.rs, session_state.json
- **Achievement:** SRSæ¨™æº–ã®True Rotationæ¦‚å¿µã‚’æ­£ã—ãå®Ÿè£…ã—ã€O-minoã®wobbleåŠ¹æœã‚’é”æˆ
- **Technical Impact:** CLIç‰ˆã¨Webç‰ˆã§åŒã˜ã€Œãƒ–ãƒ­ãƒƒã‚¯å›è»¢+è‰²å›ºå®šã€æ–¹å¼ã«å®Œå…¨çµ±ä¸€

**Key Changes:**
- CLIç‰ˆtetromino.rs: O-mino SHAPESå®šç¾©ã‚’SRS True Rotationåº§æ¨™ã«å¤‰æ›´
- Webç‰ˆlib.rs: SimpleTetromino get_blocks_at_rotation()ã§O-mino wobbleåŠ¹æœå®Ÿè£…
- SRSæº–æ‹ ã®ã€Œãƒ–ãƒ­ãƒƒã‚¯å›è»¢+è‰²å›ºå®šã€ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«çµ±ä¸€
- ç‰¹æ®Šãªè‰²å›è»¢å‡¦ç†ã‚’å‰Šé™¤ã—ã€ç‰©ç†å›è»¢é †åºã«ã‚ˆã‚‹è‡ªç„¶ãªè‰²è¿½å¾“å®Ÿç¾

### âœ… Code Cleanup: get_rotated_color_mappingæœ€é©åŒ–
- **Commit:** d383ad6  
- **Files:** src/lib.rs
- **Achievement:** ä¸è¦ãªãƒ¡ã‚½ãƒƒãƒ‰ã¨å¼•æ•°ã‚’å‰Šé™¤ã—ã¦ã‚³ãƒ¼ãƒ‰ã®ç°¡æ½”æ€§ã¨ä¿å®ˆæ€§ã‚’å‘ä¸Š

**Key Changes:**
- get_rotated_color_mappingé–¢æ•°ã‹ã‚‰ä¸è¦ãª_clockwiseå¼•æ•°ã‚’å‰Šé™¤
- SRS True Rotationå®Ÿè£…ã«ã‚ˆã‚Šä¸è¦ã¨ãªã£ãŸrotate_colorsé–¢æ•°ã‚’å®Œå…¨å‰Šé™¤
- rotate_current_pieceå†…ã®rotate_colorså‘¼ã³å‡ºã—ã‚‚å‰Šé™¤
- å®Ÿè£…ã‚’ã‚ˆã‚Šç°¡æ½”ã«ã—ã¦SRSæ¨™æº–æº–æ‹ ã®å˜ç´”ãªè‰²ãƒãƒƒãƒ”ãƒ³ã‚°ã«çµ±ä¸€

### âœ… Node.jsäº’æ›WASMãƒ†ã‚¹ãƒˆç’°å¢ƒå®Ÿè£…
- **Files:** Cargo.toml, src/lib.rs, src/random.rs, src/scheduler.rs, wasm-pack.toml
- **Achievement:** ãƒ–ãƒ©ã‚¦ã‚¶é™å®šAPIä¾å­˜ã«ã‚ˆã‚‹Node.jså®Ÿè¡Œã‚¨ãƒ©ãƒ¼ã‚’è§£æ±ºã—ã€ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ è‡ªå‹•ãƒ†ã‚¹ãƒˆã‚’å®Ÿç¾

**Key Additions:**
- nodejs-test feature flagè¿½åŠ 
- js_math_random() Node.jsäº’æ›ãƒãƒªãƒ•ã‚£ãƒ«
- js_date_now() SystemTimeå®Ÿè£…
- console_log! println!ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- web_sys::window() æ¡ä»¶ä»˜ãç„¡åŠ¹åŒ–
- wasm-pack.toml ãƒ†ã‚¹ãƒˆè¨­å®š

### âœ… Animation System Complete Migration
- **Commit:** 6f3dd49
- **Achievement:** CLIç‰ˆã®æ‰‹å‹•ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†ã‚’å…±é€šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«animation::update_animations()ã«çµ±åˆã€‚WASMç‰ˆã¨ã®çµ±ä¸€é”æˆ

**Implementation Details:**
- Replaced functions: handle_line_blink_animation, handle_push_down_animation
- Unified with: animation::update_animations()
- Resolved conflicts: render.rså†…ã®é‡è¤‡Animation enumå‰Šé™¤
- Architectural achievement: CLIç‰ˆã¨WASMç‰ˆã§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†å®Œå…¨çµ±ä¸€ã€ã‚³ãƒ¼ãƒ‰é‡è¤‡å‰Šæ¸›

### âœ… Complete Line Clear System Migration
- **Achievement:** CLI's connected block system, isolated block removal, and advanced scoring migrated to Web version

### âœ… Custom Score System Complete Integration  
- **Achievement:** è‰²åˆ¥ã‚¹ã‚³ã‚¢è¨ˆç®—ã¨MAX-CHAINçµ±åˆå®Œäº†ã€‚CLIç‰ˆã¨WASMç‰ˆã§lock_piece()ã§ã®ã‚¹ã‚³ã‚¢è¨ˆç®—ã‚¿ã‚¤ãƒŸãƒ³ã‚°çµ±ä¸€å®Ÿç¾
- **Details:** CLIç‰ˆmain.rsã¨WASMç‰ˆlib.rsã§calculate_line_clear_score()å…±é€šé–¢æ•°ä½¿ç”¨ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ™‚ã§ã¯ãªãlock_piece()æ™‚ã«ã‚¹ã‚³ã‚¢è¨ˆç®—å®Ÿè¡Œ

### âœ… Dynamic Board Height System
- **Achievement:** Full CLI-equivalent Dynamic Board Height System implementation complete with JavaScript APIs

---

## Technical Notes Archive

### SRS True Rotation Implementation
**Status:** Completed  
**Key Concept:** SRS True Rotation - å›è»¢ä¸­å¿ƒãŒãƒŸãƒä¸­å¿ƒã¨ä¸€è‡´ã—ã€å›è»¢æ™‚ã«åº§æ¨™ãŒå¤‰åŒ–

**O-mino Implementation:**
- Approach: ãƒ–ãƒ­ãƒƒã‚¯å›è»¢+è‰²å›ºå®š
- Coordinates change: State 0â†’1â†’2â†’3ã§åº§æ¨™ãŒç‰©ç†çš„ã«å›è»¢
- Color handling: è‰²ã¯å„ãƒ–ãƒ­ãƒƒã‚¯ã«å›ºå®šã€å›è»¢ã«ä¼´ã£ã¦è‡ªç„¶ã«è¿½å¾“
- Wobble effect: SRSæ¨™æº–ã®ã€ŒO tetromino does not kickã€å‹•ä½œã‚’æ­£ç¢ºã«å®Ÿè£…

**CLI/Web Unification:**
- tetromino.rs: SHAPESå®šç¾©ã‚’å›è»¢ã™ã‚‹åº§æ¨™ç³»ã«å¤‰æ›´
- lib.rs: get_blocks_at_rotation()ã§state-specificåº§æ¨™å®Ÿè£…
- Color system: ç‰¹æ®Šãªè‰²å›è»¢å‡¦ç†ã‚’å‰Šé™¤ã—ã€ç›´æ¥ãƒãƒƒãƒ”ãƒ³ã‚°ã«çµ±ä¸€

**Benefits:**
- SRSæ¨™æº–å®Œå…¨æº–æ‹ 
- å®Ÿè£…ã®ä¸€è²«æ€§å‘ä¸Š
- ç‰¹æ®Šã‚±ãƒ¼ã‚¹å‡¦ç†å‰Šæ¸›
- ä¿å®ˆæ€§å‘ä¸Š

### Node.js WASM Testing Implementation
**Status:** Completed  
**Problem Solved:** ãƒ–ãƒ©ã‚¦ã‚¶é™å®šAPI (console.log, Date.now, Math.random, web_sys::window) ã«ã‚ˆã‚‹Node.jså®Ÿè¡Œã‚¨ãƒ©ãƒ¼
**Solution Approach:** æ¡ä»¶ä»˜ãã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã¨ãƒãƒªãƒ•ã‚£ãƒ«å®Ÿè£…

**Key Features:**
- Feature flag separation: wasm-test (browser) vs nodejs-test (Node.js)
- js_math_random() deterministic PRNG for Node.js
- js_date_now() SystemTime-based implementation
- console_log! println! fallback
- web_sys::window() conditional disabling in tests

**Build Verification:** âœ… cargo build --target wasm32-unknown-unknown --lib --features wasm-test

**Test Commands:**
- wasm-pack test --node --features nodejs-test -- --lib
- wasm-pack test --features wasm-test (browser)

**Impact:** ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ è‡ªå‹•ãƒ†ã‚¹ãƒˆåŸºç›¤ã®ç¢ºç«‹ã€CI/CDæº–å‚™å®Œäº†

### Dynamic Board Height Implementation  
**Status:** Completed

**Key Changes:**
- Added current_board_height field to WasmGameState
- Updated is_valid_position for dynamic boundary checking
- Modified clear_lines and get_connected_cells_info to use current_board_height
- Implemented finalize_gray_line with CLI-equivalent height reduction
- Added JavaScript APIs: get_current_board_height() and set_current_board_height()

**CLI Reusability:** Successfully reused CLI's saturating_sub() logic and boundary checking patterns